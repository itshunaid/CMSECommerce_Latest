@model IEnumerable<Category>

<div class="card shadow-lg mb-4 border-dark rounded-3">

    @* Header is fine (dark background, gold text) *@
    @* <div class="card-header bg-dark text-warning py-3">
        <h5 class="mb-0 fw-bold">
            <i class="fas fa-bars me-2"></i> Product Categories
        </h5>
    </div> *@


    <div class="card-body p-0">
        <ul class="list-group list-group-flush activeul">


            @* All Products Link *@
            <li class="list-group-item category-list-item @(ViewBag.CategorySlug == null || ViewBag.CategorySlug == "" ? "active-category" : "")">
                <a class="nav-link text-decoration-none d-flex justify-content-between align-items-center"
                   asp-controller="Products"
                   asp-action="Index"
                   asp-route-slug="">
                    <span><i class="fas fa-boxes me-2"></i> All Products</span>
                    <i class="fas fa-chevron-right small text-muted"></i>
                </a>
            </li>


            @* Individual Category Links *@
            @* --- Individual Category Links (Royal Design Applied via CSS) --- *@
            @foreach (var item in Model)
            {
                <li class="list-group-item category-list-item @(ViewBag.CategorySlug == item.Slug ? "active-category" : "")">
                    <a class="nav-link text-decoration-none d-flex justify-content-between align-items-center"
                       asp-controller="Products"
                       asp-action="Index"
                       asp-route-slug="@item.Slug">

                        @* The text is visible because the default link color is dark against a light background. *@
                        <span><i class="far fa-folder me-2"></i> @item.Name</span>

                        @* The chevron remains muted unless active *@
                        <i class="fas fa-chevron-right small text-muted"></i>
                    </a>
                </li>
            }


        </ul>
    </div>
</div>

@section Styles {
    <style>
        .category-list-item {
            padding: 0;
            border-left: 3px solid transparent;
            transition: all 0.2s ease-in-out;
        }

            .category-list-item:hover {
                background-color: #f0f0f0; /* Slightly darker light background on hover */
            }

            .category-list-item .nav-link {
                /* VISIBILITY FIX: Make default text color dark black/blue for contrast against white card body */
                color: var(--bs-dark) !important;
                padding: 0.75rem 1rem;
            }

        /* Active State Styling */
        .active-category {
            /* Border highlight remains dark for depth */
            border-left: 3px solid var(--bs-dark) !important;
            /* Active background color is light gray */
            background-color: #e6e6e6 !important;
        }

            .active-category .nav-link {
                /* VISIBILITY FIX: Use the Gold/Warning color for the active link text */
                color: var(--bs-warning) !important;
                font-weight: 700; /* Extra bold when active */
            }

            /* Hide right chevron on active link */
            .active-category .fa-chevron-right {
                display: none;
            }

       
    </style>
}

@section Scripts {
    <script>
        // No client-side script needed for basic active link highlight if using the server-side check.
    </script>
}